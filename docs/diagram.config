meta {
  title "Transcoding Environment"
}

elements {
  card pc

  gcp {
    card storage as input {
    	description "-input bucket"
    }

    group vpc {
      name "VPC (private network)"
      
      stacked_card workflows {
        description "- Upload Event\n- Batch"
      }
        
      stacked_card gke {
      	name "Kubernetes Engine"
        description "Private Autoscale Cluster"
      }
      stacked_card batch
      card transcoder_api {
      	icon_url "https://drive.google.com/file/d/13CE6TCf9h0-9RKFg84a_2gB8bwEuMFRT/view?usp=drive_link&resourcekey=0-_lF8clennu0cz7WAJmjEKA"
      	display_name "Transcoder API"
      }
	}
    
    card storage as output {
    	description "-output bucket"
    }
  }
}

paths {
  pc --> input
  input --> workflows
  workflows --> gke
  workflows ..> batch
  workflows ..> transcoder_api
  vpc --> output
}
